---
import ShopItems from '../../components/shop-items/shop-items';
import CartFlyoutToggle from '../../components/cart-flyout-toggle/cart-flyout-toggle';
import CartFlyout from '../../components/cart-flyout/cart-flyout';
import Layout from '../../layouts/layout.astro';
import { getEntryBySlug } from 'astro:content';
import products from '../../data/products.json';

export async function getStaticPaths() {
  const page = await getEntryBySlug('pages', 'shop');
  return [{ params: page.data }];
}

const page = await getEntryBySlug('pages', 'shop');
const frontmatter = page.data;
---

<Layout {...frontmatter}>
  <CartFlyoutToggle client:load />
  <CartFlyout client:load />
  <ShopItems
    shop_items={products}
    page_size={frontmatter.page_size}
    client:load
  />
</Layout>
